{
	"id": "secrets-and-tls",
	"title": "Secrets, TLS, and Deployment Hardening",
	"summary": "Guidance for secrets management, TLS requirements, and startup validation for production environments.",
	"description": "Document recommended secret stores (KMS, Vault), rotation procedures, and enforce that production deployments use CA-signed TLS certs and validated host configuration.",
	"components": [
		{ "name": "Secrets Guidance", "responsibility": "Recommend KMS/Vault patterns and sample env config for production." },
		{ "name": "TLS Requirements", "responsibility": "Document mandatory CA-signed certs in production and optional heuristics to detect self-signed certs on startup." },
		{ "name": "Startup Validation", "responsibility": "Startup checks that validate required env variables and cert presence in production mode." }
	],
	"interactions": [
		"Deployment tools inject secrets from vault/KMS into runtime environment.",
		"Startup validation prevents insecure defaults in production (fail-fast).",
		"Documentation describes rotation and emergency rotation steps."
	],
	"tech_stack": ["HashiCorp Vault / AWS KMS / Azure KeyVault examples", "CI secret scanning guidance"],
	"acceptance_criteria": [
		"Docs added describing recommended KMS/vault integrations and rotation steps.",
		"Startup validation implemented or documented to fail in production when insecure defaults are present.",
		"TLS guidance added to deployment docs (no self-signed allowed in production)."
	],
	"tasks": [
		"Draft `docs/ops/SECRETS.md` with KMS/Vault recommendations and local dev patterns.",
		"Add startup validation checklist and example code/psuedo for failing when `OD_HOST` is localhost in production.",
		"Document TLS provisioning and rotation in `docs/` with links to provider-specific instructions." 
	],
	"references": ["server/settings.js", "docs/design/07-Configuration-Deployment-Specification.md"],
	"created_at": "2025-12-05"
}
