{
	"id": "interface-control-document",
	"title": "Interface Control / OpenAPI Specification",
	"summary": "Canonical OpenAPI 3.0 specification for all REST endpoints, request/response schemas, and error semantics.",
	"description": "Provide a machine-readable contract for the API surface. The OpenAPI spec will drive request/response validation, client generation, and CI linting of the contract.",
	"components": [
		{ "name": "OpenAPI Spec", "responsibility": "Author `docs/openapi.yaml` describing existing endpoints and schemas." },
		{ "name": "Schema Generation", "responsibility": "Keep schemas in `src/lib/schemas` synchronized with the spec (or generate spec from schemas)." },
		{ "name": "CI Linting", "responsibility": "Add CI job to lint the OpenAPI file (spectral/openapi-cli) and fail on critical issues." }
	],
	"interactions": [
		"Spec reviewed with API owners before locking schema.",
		"CI validates the spec and runs contract tests against a running server.",
		"Spec used to generate example requests/responses for docs and client SDKs."
	],
	"data_flow": "Design -> spec -> validation -> implementation -> tests",
	"tech_stack": ["OpenAPI 3.0", "spectral / openapi-cli", "(optional) openapi-generator"],
	"acceptance_criteria": [
		"`docs/openapi.yaml` exists and covers primary endpoints (triggers, auth, health).",
		"CI job lints the OpenAPI file and fails on schema errors.",
		"Contract tests validate live responses for at least the critical endpoints."
	],
	"tasks": [
		"Draft `docs/openapi.yaml` with GET/POST/PUT/DELETE for `/api/triggers` and auth endpoints.",
		"Add CI workflow step to lint `docs/openapi.yaml` using `spectral` or `openapi-cli`.",
		"Create simple contract tests that fetch `/api/health` and `/api/triggers` and validate responses against the spec."
	],
	"references": ["docs/openapi.yaml", "src/routes/api/", "src/lib/schemas/"],
	"created_at": "2025-12-05"
}
